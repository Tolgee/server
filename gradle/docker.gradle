docker {
    dockerfile file('docker/app/Dockerfile')
    name "tolgee/tolgee"
    copySpec.from(tasks.unpack.outputs, 'docker/app').into("dependency")
    buildArgs(['DEPENDENCY': "dependency"])
}

if (tasks.findByName("wrapper") == null) {
    task wrapper(type: Wrapper) {
    }
}

task copyDockerIgnore(type: Copy) {
    from "docker/app/.dockerignore"
    into "build/docker"
}

project.tasks.findByName("docker").dependsOn(unpack, copyDist, copyDockerIgnore)
